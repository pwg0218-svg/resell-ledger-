export const SIZE_CHART = {
    'Nike': {
        'Men': [
            { kr: '220', us: '3.5', eu: '35', jp: '22.0' },
            { kr: '225', us: '4', eu: '36', jp: '22.5' },
            { kr: '230', us: '4.5', eu: '36.5', jp: '23.0' },
            { kr: '235', us: '5', eu: '37.5', jp: '23.5' },
            { kr: '240', us: '5.5', eu: '38', jp: '24.0' },
            { kr: '245', us: '6', eu: '38.5', jp: '24.5' },
            { kr: '250', us: '6.5', eu: '39', jp: '25.0' },
            { kr: '255', us: '7', eu: '40', jp: '25.5' },
            { kr: '260', us: '7.5', eu: '40.5', jp: '26.0' },
            { kr: '265', us: '8', eu: '41', jp: '26.5' },
            { kr: '270', us: '8.5', eu: '42', jp: '27.0' },
            { kr: '275', us: '9', eu: '42.5', jp: '27.5' },
            { kr: '280', us: '9.5', eu: '43', jp: '28.0' },
            { kr: '285', us: '10', eu: '44', jp: '28.5' },
            { kr: '290', us: '10.5', eu: '44.5', jp: '29.0' },
            { kr: '295', us: '11', eu: '45', jp: '29.5' },
            { kr: '300', us: '11.5', eu: '45.5', jp: '30.0' },
            { kr: '305', us: '12', eu: '46', jp: '30.5' },
            { kr: '310', us: '12.5', eu: '47', jp: '31.0' },
            { kr: '315', us: '13', eu: '47.5', jp: '31.5' },
            { kr: '320', us: '13.5', eu: '48', jp: '32.0' },
            { kr: '325', us: '14', eu: '48.5', jp: '32.5' },
            { kr: '330', us: '15', eu: '49.5', jp: '33.0' }
        ],
        'Women': [
            { kr: '220', us: '5', eu: '35.5', jp: '22.0' },
            { kr: '225', us: '5.5', eu: '36', jp: '22.5' },
            { kr: '230', us: '6', eu: '36.5', jp: '23.0' },
            { kr: '235', us: '6.5', eu: '37.5', jp: '23.5' },
            { kr: '240', us: '7', eu: '38', jp: '24.0' },
            { kr: '245', us: '7.5', eu: '38.5', jp: '24.5' },
            { kr: '250', us: '8', eu: '39', jp: '25.0' },
            { kr: '255', us: '8.5', eu: '40', jp: '25.5' },
            { kr: '260', us: '9', eu: '40.5', jp: '26.0' },
            { kr: '265', us: '9.5', eu: '41', jp: '26.5' },
            { kr: '270', us: '10', eu: '42', jp: '27.0' },
            { kr: '275', us: '10.5', eu: '42.5', jp: '27.5' },
            { kr: '280', us: '11', eu: '43', jp: '28.0' },
            { kr: '285', us: '11.5', eu: '44', jp: '28.5' },
            { kr: '290', us: '12', eu: '44.5', jp: '29.0' }
        ],
        'Kids': [
            { kr: '170', us: '11C', eu: '28', jp: '17.0' },
            { kr: '175', us: '11.5C', eu: '28.5', jp: '17.5' },
            { kr: '180', us: '12C', eu: '29.5', jp: '18.0' },
            { kr: '185', us: '12.5C', eu: '30', jp: '18.5' },
            { kr: '190', us: '13C', eu: '31', jp: '19.0' },
            { kr: '195', us: '13.5C', eu: '31.5', jp: '19.5' },
            { kr: '200', us: '1Y', eu: '32', jp: '20.0' },
            { kr: '205', us: '1.5Y', eu: '33', jp: '20.5' },
            { kr: '210', us: '2Y', eu: '33.5', jp: '21.0' },
            { kr: '215', us: '2.5Y', eu: '34', jp: '21.5' },
            { kr: '220', us: '3Y', eu: '35', jp: '22.0' },
            { kr: '225', us: '3.5Y', eu: '35.5', jp: '22.5' },
            { kr: '230', us: '4Y', eu: '36', jp: '23.0' },
            { kr: '235', us: '4.5Y', eu: '36.5', jp: '23.5' },
            { kr: '240', us: '5Y', eu: '37.5', jp: '24.0' },
            { kr: '245', us: '5.5Y', eu: '38', jp: '24.5' },
            { kr: '250', us: '6Y', eu: '38.5', jp: '25.0' },
            { kr: '255', us: '6.5Y', eu: '39', jp: '25.5' },
            { kr: '260', us: '7Y', eu: '40', jp: '26.0' }
        ]
    },
    'Adidas': {
        'Men': [
            { kr: '220', us: '4', eu: '36' }, { kr: '225', us: '4.5', eu: '36 2/3' }, { kr: '230', us: '5', eu: '37 1/3' },
            { kr: '235', us: '5.5', eu: '38' }, { kr: '240', us: '6', eu: '38 2/3' }, { kr: '245', us: '6.5', eu: '39 1/3' },
            { kr: '250', us: '7', eu: '40' }, { kr: '255', us: '7.5', eu: '40 2/3' }, { kr: '260', us: '8', eu: '41 1/3' },
            { kr: '265', us: '8.5', eu: '42' }, { kr: '270', us: '9', eu: '42 2/3' }, { kr: '275', us: '9.5', eu: '43 1/3' },
            { kr: '280', us: '10', eu: '44' }, { kr: '285', us: '10.5', eu: '44 2/3' }, { kr: '290', us: '11', eu: '45 1/3' },
            { kr: '295', us: '11.5', eu: '46' }, { kr: '300', us: '12', eu: '46 2/3' }, { kr: '305', us: '12.5', eu: '47 1/3' },
            { kr: '310', us: '13', eu: '48' }, { kr: '315', us: '13.5', eu: '48 2/3' }, { kr: '320', us: '14', eu: '49 1/3' },
            { kr: '325', us: '14.5', eu: '50' }, { kr: '330', us: '15', eu: '50 2/3' }
        ],
        'Women': [
            { kr: '220', us: '5', eu: '36' }, { kr: '225', us: '5.5', eu: '36 2/3' }, { kr: '230', us: '6', eu: '37 1/3' },
            { kr: '235', us: '6.5', eu: '38' }, { kr: '240', us: '7', eu: '38 2/3' }, { kr: '245', us: '7.5', eu: '39 1/3' },
            { kr: '250', us: '8', eu: '40' }, { kr: '255', us: '8.5', eu: '40 2/3' }, { kr: '260', us: '9', eu: '41 1/3' },
            { kr: '265', us: '9.5', eu: '42' }, { kr: '270', us: '10', eu: '42 2/3' }, { kr: '275', us: '10.5', eu: '43 1/3' },
            { kr: '280', us: '11', eu: '44' }, { kr: '285', us: '11.5', eu: '44 2/3' }, { kr: '290', us: '12', eu: '45 1/3' },
            { kr: '295', us: '12.5', eu: '46' }, { kr: '300', us: '13', eu: '46 2/3' }, { kr: '305', us: '13.5', eu: '47 1/3' },
            { kr: '310', us: '14', eu: '48' }, { kr: '315', us: '14.5', eu: '48 2/3' }, { kr: '320', us: '15', eu: '49 1/3' },
            { kr: '325', us: '15.5', eu: '50' }
        ]
    },
    'Puma': {
        'Men': [
            { kr: '220', us: '4' }, { kr: '225', us: '4.5' }, { kr: '230', us: '5' }, { kr: '235', us: '5.5' },
            { kr: '240', us: '6' }, { kr: '245', us: '6.5' }, { kr: '250', us: '7' }, { kr: '255', us: '7.5' },
            { kr: '260', us: '8' }, { kr: '265', us: '8.5' }, { kr: '270', us: '9' }, { kr: '275', us: '9.5' },
            { kr: '280', us: '10' }, { kr: '285', us: '10.5' }, { kr: '290', us: '11' }, { kr: '295', us: '11.5' },
            { kr: '300', us: '12' }, { kr: '310', us: '13' }, { kr: '320', us: '14' }
        ],
        'Women': [
            { kr: '220', us: '5.5' }, { kr: '225', us: '6' }, { kr: '230', us: '6.5' }, { kr: '235', us: '7' },
            { kr: '240', us: '7.5' }, { kr: '245', us: '8' }, { kr: '250', us: '8.5' }, { kr: '255', us: '9' },
            { kr: '260', us: '9.5' }, { kr: '265', us: '10' }, { kr: '270', us: '10.5' }, { kr: '275', us: '11' },
            { kr: '280', us: '11.5' }, { kr: '285', us: '12' }, { kr: '290', us: '12.5' }
        ]
    },
    'Vans': {
        'Men': [
            { kr: '215', us: '3.5' }, { kr: '220', us: '4' }, { kr: '225', us: '4.5' }, { kr: '230', us: '5' },
            { kr: '235', us: '5.5' }, { kr: '240', us: '6' }, { kr: '245', us: '6.5' }, { kr: '250', us: '7' },
            { kr: '255', us: '7.5' }, { kr: '260', us: '8' }, { kr: '265', us: '8.5' }, { kr: '270', us: '9' },
            { kr: '275', us: '9.5' }, { kr: '280', us: '10' }, { kr: '285', us: '10.5' }, { kr: '290', us: '11' },
            { kr: '295', us: '11.5' }, { kr: '300', us: '12' }, { kr: '305', us: '12.5' }, { kr: '310', us: '13' },
            { kr: '315', us: '13.5' }, { kr: '320', us: '14' }
        ],
        'Women': [
            { kr: '215', us: '5' }, { kr: '220', us: '5.5' }, { kr: '225', us: '6' }, { kr: '230', us: '6.5' },
            { kr: '235', us: '7' }, { kr: '240', us: '7.5' }, { kr: '245', us: '8' }, { kr: '250', us: '8.5' },
            { kr: '255', us: '9' }, { kr: '260', us: '9.5' }, { kr: '265', us: '10' }, { kr: '270', us: '10.5' },
            { kr: '275', us: '11' }, { kr: '280', us: '11.5' }, { kr: '285', us: '12' }, { kr: '290', us: '12.5' },
            { kr: '295', us: '13' }, { kr: '300', us: '13.5' }, { kr: '305', us: '14' }, { kr: '310', us: '14.5' },
            { kr: '315', us: '15' }, { kr: '320', us: '15.5' }
        ]
    },
    'New Balance': {
        'Men': [
            { kr: '220', us: '4' }, { kr: '225', us: '4.5' }, { kr: '230', us: '5' }, { kr: '235', us: '5.5' },
            { kr: '240', us: '6' }, { kr: '245', us: '6.5' }, { kr: '250', us: '7' }, { kr: '255', us: '7.5' },
            { kr: '260', us: '8' }, { kr: '265', us: '8.5' }, { kr: '270', us: '9' }, { kr: '275', us: '9.5' },
            { kr: '280', us: '10' }, { kr: '285', us: '10.5' }, { kr: '290', us: '11' }, { kr: '295', us: '11.5' },
            { kr: '300', us: '12' }, { kr: '305', us: '12.5' }, { kr: '310', us: '13' }, { kr: '320', us: '14' }
        ],
        'Women': [
            { kr: '220', us: '5' }, { kr: '225', us: '5.5' }, { kr: '230', us: '6' }, { kr: '235', us: '6.5' },
            { kr: '240', us: '7' }, { kr: '245', us: '7.5' }, { kr: '250', us: '8' }, { kr: '255', us: '8.5' },
            { kr: '260', us: '9' }, { kr: '265', us: '9.5' }, { kr: '270', us: '10' }, { kr: '275', us: '10.5' },
            { kr: '280', us: '11' }, { kr: '285', us: '11.5' }, { kr: '290', us: '12' }
        ]
    },
    'Asics': {
        'Men': [
            { kr: '225', us: '4' }, { kr: '230', us: '4.5' }, { kr: '235', us: '5' }, { kr: '240', us: '5.5' },
            { kr: '245', us: '6' }, { kr: '250', us: '6.5' }, { kr: '252.5', us: '7' }, { kr: '255', us: '7.5' },
            { kr: '260', us: '8' }, { kr: '265', us: '8.5' }, { kr: '270', us: '9' }, { kr: '275', us: '9.5' },
            { kr: '280', us: '10' }, { kr: '282.5', us: '10.5' }, { kr: '285', us: '11' }, { kr: '290', us: '11.5' },
            { kr: '295', us: '12' }, { kr: '300', us: '12.5' }, { kr: '305', us: '13' }, { kr: '307.5', us: '13.5' },
            { kr: '310', us: '14' }, { kr: '315', us: '14.5' }, { kr: '320', us: '15' }
        ],
        'Women': [
            { kr: '215', us: '4' }, { kr: '220', us: '4.5' }, { kr: '225', us: '5' }, { kr: '227.5', us: '5.5' },
            { kr: '230', us: '6' }, { kr: '235', us: '6.5' }, { kr: '240', us: '7' }, { kr: '245', us: '7.5' },
            { kr: '250', us: '8' }, { kr: '255', us: '8.5' }, { kr: '257.5', us: '9' }, { kr: '260', us: '9.5' },
            { kr: '265', us: '10' }, { kr: '270', us: '10.5' }, { kr: '275', us: '11' }, { kr: '280', us: '11.5' },
            { kr: '285', us: '12' }, { kr: '287.5', us: '12.5' }, { kr: '290', us: '13' }
        ]
    },
    'Keen': {
        'Men': [
            { kr: '250', us: '7' }, { kr: '255', us: '7.5' }, { kr: '260', us: '8' }, { kr: '265', us: '8.5' },
            { kr: '270', us: '9' }, { kr: '275', us: '9.5' }, { kr: '280', us: '10' }, { kr: '285', us: '10.5' },
            { kr: '290', us: '11' }, { kr: '295', us: '11.5' }, { kr: '300', us: '12' }, { kr: '310', us: '13' },
            { kr: '320', us: '14' }, { kr: '330', us: '15' }, { kr: '340', us: '16' }, { kr: '350', us: '17' }
        ],
        'Women': [
            { kr: '220', us: '5' }, { kr: '225', us: '5.5' }, { kr: '230', us: '6' }, { kr: '235', us: '6.5' },
            { kr: '240', us: '7' }, { kr: '245', us: '7.5' }, { kr: '250', us: '8' }, { kr: '255', us: '8.5' },
            { kr: '260', us: '9' }, { kr: '265', us: '9.5' }, { kr: '270', us: '10' }, { kr: '275', us: '10.5' },
            { kr: '280', us: '11' }, { kr: '290', us: '12' }
        ]
    },
    'Salomon': {
        'Men': [
            { kr: '220', us: '4' }, { kr: '225', us: '4.5' }, { kr: '230', us: '5' }, { kr: '235', us: '5.5' },
            { kr: '240', us: '6' }, { kr: '245', us: '6.5' }, { kr: '250', us: '7' }, { kr: '255', us: '7.5' },
            { kr: '260', us: '8' }, { kr: '265', us: '8.5' }, { kr: '270', us: '9' }, { kr: '275', us: '9.5' },
            { kr: '280', us: '10' }, { kr: '285', us: '10.5' }, { kr: '290', us: '11' }, { kr: '295', us: '11.5' },
            { kr: '300', us: '12' }, { kr: '305', us: '12.5' }, { kr: '310', us: '13' }, { kr: '315', us: '13.5' },
            { kr: '320', us: '14' }, { kr: '325', us: '14.5' }, { kr: '330', us: '15' }
        ]
    },
    'Crocs': {
        'Unisex': [
            { kr: '210', us: 'M2W4' }, { kr: '220', us: 'M3W5' }, { kr: '230', us: 'M4W6' }, { kr: '240', us: 'M5W7' },
            { kr: '250', us: 'M6W8' }, { kr: '260', us: 'M7W9' }, { kr: '265', us: 'M8W10' }, { kr: '270', us: 'M9W11' },
            { kr: '280', us: 'M10W12' }, { kr: '290', us: 'M11W13' }, { kr: '300', us: 'M12W14' }, { kr: '310', us: 'M13W15' },
            { kr: '320', us: 'M14W16' }, { kr: '330', us: 'M15W17' }, { kr: '340', us: 'M16W18' }, { kr: '350', us: 'M17W19' }
        ]
    },
    'Converse': {
        'Men': [
            { kr: '220', us: '3' }, { kr: '225', us: '3.5' }, { kr: '230', us: '4' }, { kr: '235', us: '4.5' },
            { kr: '240', us: '5' }, { kr: '245', us: '5.5' }, { kr: '250', us: '6.5' }, { kr: '255', us: '7' },
            { kr: '260', us: '7.5' }, { kr: '265', us: '8' }, { kr: '270', us: '8.5' }, { kr: '275', us: '9' },
            { kr: '280', us: '9.5' }, { kr: '285', us: '10' }, { kr: '290', us: '10.5' }, { kr: '295', us: '11' },
            { kr: '300', us: '11.5' }
        ],
        'Women': [
            { kr: '220', us: '5' }, { kr: '225', us: '5.5' }, { kr: '230', us: '6' }, { kr: '235', us: '6.5' },
            { kr: '240', us: '7' }, { kr: '245', us: '7.5' }, { kr: '250', us: '8.5' }, { kr: '255', us: '9' },
            { kr: '260', us: '9.5' }, { kr: '265', us: '10' }, { kr: '270', us: '10.5' }, { kr: '275', us: '11' },
            { kr: '280', us: '11.5' }, { kr: '285', us: '12' }, { kr: '290', us: '12.5' }, { kr: '295', us: '13' },
            { kr: '300', us: '13.5' }
        ]
    },
    'Descente': {
        'Men': [
            { kr: '250', us: '7' }, { kr: '255', us: '7.5' }, { kr: '260', us: '8' }, { kr: '265', us: '8.5' },
            { kr: '270', us: '9' }, { kr: '275', us: '9.5' }, { kr: '280', us: '10' }, { kr: '285', us: '10.5' },
            { kr: '290', us: '11' }, { kr: '295', us: '11.5' }, { kr: '300', us: '12' }, { kr: '310', us: '13' }
        ],
        'Women': [
            { kr: '220', us: '5' }, { kr: '225', us: '5.5' }, { kr: '230', us: '6' }, { kr: '235', us: '6.5' },
            { kr: '240', us: '7' }, { kr: '245', us: '7.5' }, { kr: '250', us: '8' }, { kr: '255', us: '8.5' },
            { kr: '260', us: '9' }, { kr: '265', us: '9.5' }, { kr: '270', us: '10' }
        ]
    }
};

const BRAND_MAPPING = {
    '나이키': 'Nike',
    '아디다스': 'Adidas',
    '푸마': 'Puma',
    '퓨마': 'Puma',
    '반스': 'Vans',
    '뉴발란스': 'New Balance',
    '아식스': 'Asics',
    '킨': 'Keen',
    '살로몬': 'Salomon',
    '크록스': 'Crocs',
    '컨버스': 'Converse',
    '데상트': 'Descente'
};

/**
 * Finds conversion based on Brand, Gender, and KR Size.
 * Returns the US size (or standard size) if found.
 */
export function findStandardSize(brand, gender, krSize, format = 'BOTH') {
    if (!brand || !krSize) return '';

    const cleanBrand = brand.toString().trim();
    const cleanKrSize = krSize.toString().trim();

    // Normalize inputs
    // 1. Check Korean mapping
    let brandKey = BRAND_MAPPING[cleanBrand] || cleanBrand;

    // 2. Case-insensitive search in keys
    brandKey = Object.keys(SIZE_CHART).find(k => k.toLowerCase() === brandKey.toLowerCase()) || brandKey;

    const chart = SIZE_CHART[brandKey];

    if (!chart) return '';

    // Handle Crocs (Unisex) or Salomon (Men only in data, assumed Unisex/Men)
    let genderKey = 'Men'; // Default
    if (gender === 'Women') genderKey = 'Women';
    if (gender === 'Kids') genderKey = 'Kids';

    if (brandKey === 'Crocs') genderKey = 'Unisex';
    if (brandKey === 'Salomon' && !chart['Women']) genderKey = 'Men';

    const sizeData = chart[genderKey];
    if (!sizeData) return '';

    const match = sizeData.find(item => item.kr === cleanKrSize);

    if (match) {
        const usSize = match.us;
        const euSize = match.eu;

        // Crocs/Kids special format
        if (usSize.startsWith('M') || usSize.endsWith('Y') || brandKey === 'Crocs') {
            return usSize;
        }

        // Return based on format
        if (format === 'EU' && euSize) {
            return `EU ${euSize}`;
        }
        if (format === 'BOTH' && euSize) {
            return `US ${usSize} / EU ${euSize}`;
        }
        return `US ${usSize}`;
    }

    return '';
}

export default { findStandardSize, SIZE_CHART };
